CREATE DATABASE BANK_MANAGEMENT_SYSTEM;
USE BANK_MANAGEMENT_SYSTEM;


-- CREATING CUSTOMER PERSONAL DATABASE-->

CREATE TABLE CUSTOMER_PERSONAL_INFO(
    
    CUSTOMER_ID INT PRIMARY KEY,
    NAME VARCHAR(30),
    AGE INT ,
    DOCUMENT_ID VARCHAR(100),
    ADDRESSS VARCHAR(50),
    GENDER VARCHAR(1),
    ACCOUNT_NO VARCHAR(100)
);

CREATE TABLE BANK_INFO(
   

   BANK_NAME VARCHAR(40),
   BANK_BRANCH VARCHAR(100),
   BANK_IFSC VARCHAR(100)  PRIMARY KEY
    
   
   );

CREATE TABLE TRANSACTION_INFO(

   TRANSACTION_ID INT PRIMARY KEY AUTO_INCREMENT,
   RECIEVER_ACCOUNT_NO VARCHAR(100),
   SENDER_ACCOUNT_NO VARCHAR(100),
   CUSTOMER_ID INT ,
   BANK_IFSC VARCHAR(100) ,
   TRANSACTION_TIME varchar(100),
   TRANSACTION_AMOUNT INT,
   FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER_PERSONAL_INFO(CUSTOMER_ID),
   FOREIGN KEY(BANK_IFSC) REFERENCES BANK_INFO(BANK_IFSC)
);




INSERT INTO CUSTOMER_PERSONAL_INFO VALUES(211,"ABHIJEET KUMAR",22,"AC234345155","DARBHANGA BIHAR","M","SBIN002356");
INSERT INTO CUSTOMER_PERSONAL_INFO VALUES(113,"ROHIT KUMAR",30,"AC671345155","BEGUSARAI BIHAR","M","SBIN004356");
INSERT INTO CUSTOMER_PERSONAL_INFO VALUES(401,"SUKANYA DUTTA",27,"AC23435655","LODHI BIHAR","F","SBIN002306");
INSERT INTO CUSTOMER_PERSONAL_INFO VALUES(471,"SAM SHARMA",29,"AC23432311","MUMBAI","M","SBIN000312");
INSERT INTO CUSTOMER_PERSONAL_INFO VALUES(500,"ANJALI SINHA",24,"AC23431111","DELHI","F","SBIN002300");



INSERT INTO BANK_INFO VALUES("SBI","PATNA","IFSC0002345");




INSERT INTO TRANSACTION_INFO VALUES(1,"SBIN002356","SBIN002306",401,"IFSC0002345",CURRENT_TIMESTAMP(),20000);
INSERT INTO TRANSACTION_INFO VALUES(2,"SBIN002306","SBIN002300",500,"IFSC0002345",CURRENT_TIMESTAMP(),70000);
INSERT INTO TRANSACTION_INFO VALUES(3,"SBIN002306","SBIN002356",211,"IFSC0002345",CURRENT_TIMESTAMP(),60000);
INSERT INTO TRANSACTION_INFO VALUES(4,"SBIN000312","SBIN002306",401,"IFSC0002345",CURRENT_TIMESTAMP(),10000);
INSERT INTO TRANSACTION_INFO VALUES(5,"SBIN004356","SBIN000312",471,"IFSC0002345",CURRENT_TIMESTAMP(),12000);




-- SELECT CUSTOMER_PERSONAL_INFO.NAME,CUSTOMER_PERSONAL_INFO.DOCUMENT_ID FROM CUSTOMER_PERSONAL_INFO
-- INNER JOIN TRANSACTION_INFO ON CUSTOMER_PERSONAL_INFO.CUSTOMER_ID =TRANSACTION_INFO.CUSTOMER_ID
-- WHERE TRANSACTION_AMOUNT>20000;

 



-- SELECT CUSTOMER_PERSONAL_INFO.NAME,COUNT(TRANSACTION_ID) AS NO_OF_TRANSACTION ,SUM(TRANSACTION_AMOUNT) AS TOTAL_TRANSACTION_AMOUNT, AVG(TRANSACTION_AMOUNT) AS AVERAGE_TRANSACTION_AMOUNT  FROM TRANSACTION_INFO
--     LEFT JOIN CUSTOMER_PERSONAL_INFO ON TRANSACTION_INFO.CUSTOMER_ID= CUSTOMER_PERSONAL_INFO.CUSTOMER_ID
--     GROUP BY TRANSACTION_INFO.CUSTOMER_ID
--     ORDER BY COUNT(TRANSACTION_ID) desc, CUSTOMER_PERSONAL_INFO.NAME  ;